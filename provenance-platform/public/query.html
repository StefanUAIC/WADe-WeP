<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Query - Provenance Platform</title>

    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/query.css">
</head>
<body>

<nav class="navbar">
    <div class="nav-container">
        <div class="nav-brand">üì∞ Provenance Platform</div>
        <ul class="nav-menu">
            <li><a href="/">Home</a></li>
            <li><a href="/browse">Browse</a></li>
            <li><a href="/query" class="active">Query</a></li>
            <li><a href="/sparql">SPARQL</a></li>
            <li><a href="/upload">Upload</a></li>
            <li><a href="/visualize">Visualize</a></li>
        </ul>
    </div>
</nav>

<div class="container">
    <header class="page-header">
        <h1>üîç Query Builder</h1>
        <p>Build and execute custom queries with an intuitive interface</p>
    </header>

    <div class="query-builder">

        <!-- Resource Type -->
        <section class="filter-section">
            <h3>Resource Type</h3>
            <select id="resourceType" class="filter-input">
                <option value="">All Types</option>
                <option value="Entity">Entity</option>
                <option value="Activity">Activity</option>
                <option value="Agent">Agent</option>
            </select>
        </section>

        <!-- Search Criteria -->
        <section class="filter-section filter-group">
            <div>
                <label class="filter-label">Title / Name</label>
                <input id="titleFilter" class="filter-input" type="text">
            </div>
            <div>
                <label class="filter-label">Contains URI</label>
                <input id="uriFilter" class="filter-input" type="text">
            </div>
        </section>

        <!-- Provenance -->
        <section class="filter-section filter-group">
            <input id="generatedByFilter" class="filter-input" placeholder="Generated By URI">
            <input id="attributedToFilter" class="filter-input" placeholder="Attributed To URI">
            <input id="derivedFromFilter" class="filter-input" placeholder="Derived From URI">
        </section>

        <!-- Time -->
        <section class="filter-section filter-group">
            <input id="startAfter" class="filter-input" type="datetime-local">
            <input id="endBefore" class="filter-input" type="datetime-local">
        </section>

        <!-- Quick Filters -->
        <section class="filter-section quick-filters">
            <button data-filter="recentEntities" class="quick-filter">Recent Entities</button>
            <button data-filter="withDates" class="quick-filter">Activities with Dates</button>
            <button data-filter="derivedContent" class="quick-filter">Derived Content</button>
            <button data-filter="byOrganizations" class="quick-filter">By Organizations</button>
        </section>

        <div class="query-actions">
            <button id="searchBtn" class="btn-primary">üîç Search</button>
            <button id="clearBtn" class="btn-secondary">Clear</button>
            <button id="viewSparqlBtn" class="btn-secondary">View SPARQL</button>
        </div>
    </div>

    <div id="resultsSummary" class="results-summary">
        <span id="resultCount" class="result-count"></span>
        <div class="export-options">
            <button id="exportCsvBtn" class="btn-secondary">CSV</button>
            <button id="exportJsonBtn" class="btn-secondary">JSON</button>
        </div>
    </div>

    <div id="resultsGrid" class="resource-grid">
        <div class="empty-state">Configure filters and click Search</div>
    </div>
</div>

<!-- Modals -->
<div id="detailModal" class="modal">
    <div class="modal-content">
        <button class="close-modal" data-close="detail">x</button>
        <div id="modalBody"></div>
    </div>
</div>

<div id="sparqlModal" class="modal">
    <div class="modal-content">
        <button class="close-modal" data-close="sparql">x</button>
        <textarea id="generatedSparql" readonly></textarea>
    </div>
</div>

<script src="js/common.js"></script>
<script src="js/query.js" defer></script>
</body>
</html>
