<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SPARQL Editor - Provenance Platform</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/sparql.css">
</head>
<body>

<nav class="navbar">
    <div class="nav-container">
        <div class="nav-brand">ğŸ“° Provenance Platform</div>
        <ul class="nav-menu">
            <li><a href="/">Home</a></li>
            <li><a href="/browse">Browse</a></li>
            <li><a href="/query">Query</a></li>
            <li><a href="/sparql" class="active">SPARQL</a></li>
            <li><a href="/upload">Upload</a></li>
            <li><a href="/visualize">Visualize</a></li>
        </ul>
    </div>
</nav>

<div class="container">
    <header class="page-header">
        <h1>ğŸ’» SPARQL Query Editor</h1>
        <p>Execute custom SPARQL queries against the news-provenance dataset</p>
    </header>

    <div class="editor-container">
        <div class="prefixes-box">
            <h4>Common Prefixes</h4>
            <div>PREFIX prov: &lt;http://www.w3.org/ns/prov#&gt;</div>
            <div>PREFIX dcterms: &lt;http://purl.org/dc/terms/&gt;</div>
            <div>PREFIX foaf: &lt;http://xmlns.com/foaf/0.1/&gt;</div>
            <div>PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;</div>
        </div>

        <textarea id="queryEditor" class="query-editor"></textarea>

        <div class="query-actions">
            <button data-action="execute" class="btn-primary">â–¶ Execute Query</button>
            <button data-action="clear" class="btn-secondary">Clear</button>
            <button data-action="format" class="btn-secondary">Format</button>
            <button data-action="save" class="btn-secondary">ğŸ’¾ Save</button>
        </div>

        <div class="query-info" id="queryInfo" hidden>
            <div class="info-item"><strong>Execution Time:</strong> <span id="execTime">-</span></div>
            <div class="info-item"><strong>Results:</strong> <span id="resultCount">-</span></div>
        </div>
    </div>

    <div class="examples-section">
        <h2>Example Queries</h2>
        <div class="example-queries">
            <div class="example-query" data-example="entities">ğŸ“„ List All Entities</div>
            <div class="example-query" data-example="provenance">ğŸ”— Entity Provenance Chain</div>
            <div class="example-query" data-example="agents">ğŸ‘¥ Agents and Activities</div>
            <div class="example-query" data-example="derivation">ğŸ“Š Derivation Relationships</div>
            <div class="example-query" data-example="timeline">â° Activity Timeline</div>
            <div class="example-query" data-example="complex">ğŸ¯ Complex Attribution</div>
        </div>
    </div>

    <div class="results-container" id="resultsContainer" hidden>
        <div class="section-header">
            <h2>Query Results</h2>
            <button data-action="export" class="btn-secondary">Export CSV</button>
        </div>

        <div class="results-tabs">
            <button class="results-tab active" data-tab="table">Table</button>
            <button class="results-tab" data-tab="json">JSON</button>
        </div>

        <div id="tableView" class="results-content active">
            <div id="tableResults"></div>
        </div>

        <div id="jsonView" class="results-content">
            <pre class="json-viewer" id="jsonResults"></pre>
        </div>
    </div>
</div>

<script src="js/common.js"></script>
<script src="js/sparql.js" defer></script>
</body>
</html>
